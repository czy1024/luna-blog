(window.webpackJsonp=window.webpackJsonp||[]).push([[128],{721:function(s,t,n){"use strict";n.r(t);var a=n(7),e=Object(a.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h3",{attrs:{id:"安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v(" -c "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -x "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".31.225:10822 -fsSl https://raw.githubusercontent.com/czy1024/luna-linux-conf/master/vnc/vnc_install.sh"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v('"')]),s._v("\n")])])]),n("p",[s._v("VNC Client就不用说了，单文件版，双击就能运行。")]),s._v(" "),n("p",[s._v("VNC Server安装如下：")]),s._v(" "),n("ol",[n("li",[n("strong",[s._v("ssh到你的server，然后输入以下命令安装tiger vnc")]),s._v("：")])]),s._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" tigervnc-standalone-server tigervnc-xorg-extension tigervnc-viewer\n\n")])])]),n("ol",[n("li",[n("strong",[s._v("如果你没有任何桌面的话，可以输入以下命令安装过gnome桌面")]),s._v("：")])]),s._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" ubuntu-gnome-desktop\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" gdm\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl start gdm\n\n")])])]),n("ol",[n("li",[n("strong",[s._v("配置vnc的登陆密码，直接输入以下命令，输入两次密码即可（最多只能输入8位）")]),s._v("：")])]),s._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("vncpasswd\n\n")])])]),n("ol",[n("li",[n("strong",[s._v("配置vnc使用gnome桌面")]),s._v("：")])]),s._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("nano")]),s._v(" ~/.vnc/xstartup\n\n")])])]),n("p",[s._v("然后将以下内容粘贴进去，并保存：")]),s._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/sh")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Uncomment the following two lines for normal desktop:")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("XKL_XMODMAP_DISABLE")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("unset")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("SESSION_MANAGER")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# exec /etc/X11/xinit/xinitrc")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("unset")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("DBUS_SESSION_BUS_ADDRESS")]),s._v("\ngnome-panel "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\ngnmoe-settings-daemon "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\nmetacity "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\nnautilus "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\ngnome-terminal "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n\n\n")])])]),n("p",[s._v("如果你使用的xfce桌面，就粘贴如下代码：")]),s._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/sh ")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("unset")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("SESSION_MANAGER")]),s._v(" \n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("unset")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("DBUS_SESSION_BUS_ADDRESS")]),s._v(" \nstartxfce4 "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v(" \n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" -x /etc/vnc/xstartup "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" /etc/vnc/xstartup \n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" -r "),n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$HOME")]),s._v("/.Xresources "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" xrdb "),n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$HOME")]),s._v("/.Xresources \nxsetroot -solid grey\n\n")])])]),n("ol",[n("li",[n("strong",[s._v("启动TigerVNC，直接输入")]),n("code",[s._v("vncserver")]),n("strong",[s._v("看到如下结果就成功了")]),s._v(" "),n("img",{attrs:{src:"https://img-blog.csdnimg.cn/20191121141703662.jpg",alt:"在这里插入图片描述"}}),s._v("\n但是别着急连,因为还不能用. 输入"),n("code",[s._v("netstat -ntupl|grep vnc")]),s._v("查看tiger vnc的端口监听状况:\n"),n("img",{attrs:{src:"https://img-blog.csdnimg.cn/20191121141940642.jpg",alt:"在这里插入图片描述"}}),s._v("\n发现它只是监听了127.0.0.1本地地址，没有监听外网地址。输入"),n("code",[s._v("vncserver -kill :*")]),s._v("关闭vncserver（实际上是关闭了所有vnc开启的桌面，更多命令参考请输入"),n("code",[s._v("vncserver --help")]),s._v("），然后再输入"),n("code",[s._v("vncserver -localhost no")]),s._v("，开启外网的监听。\n"),n("img",{attrs:{src:"https://img-blog.csdnimg.cn/20191121142528917.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9jYXRzaGl0b25lLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}}),s._v("\n可以看到已经监听0.0.0.0了，端口5901。\n如果你使用ECS或者有防火墙的话，可能会有一些安全策略上的配置需要你放行该端口。\n至此，你可以开启VNC Viewer进行远程了。\n"),n("img",{attrs:{src:"https://img-blog.csdnimg.cn/20191121145230255.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9jYXRzaGl0b25lLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}})])]),s._v(" "),n("h3",{attrs:{id:"注意"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#注意"}},[s._v("#")]),s._v(" 注意")]),s._v(" "),n("p",[s._v("(1) VNC server输入IP和端口的方式（中间用两个冒号分隔）。")]),s._v(" "),n("p",[s._v("(2) 如果远程之后你发现是"),n("strong",[s._v("灰屏而且鼠标指针是个十字")]),s._v("的话，表明需要安装gnome缺失组件：")]),s._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" --no-install-recommends ubuntu-desktop gnome-panel gnome-settings-daemon metacity nautilus gnome-terminal -y\n\n")])])]),n("p",[s._v("然后再安装dpi")]),s._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" xfonts-100dpi\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" xfonts-75dpi\n\n")])])]),n("h3",{attrs:{id:"图赏"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#图赏"}},[s._v("#")]),s._v(" 图赏")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://img-blog.csdnimg.cn/20191121144358233.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9jYXRzaGl0b25lLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}})]),s._v(" "),n("hr"),s._v(" "),n("blockquote",[n("p",[s._v("Inspired by\n"),n("a",{attrs:{href:"https://www.cyberciti.biz/faq/install-and-configure-tigervnc-server-on-ubuntu-18-04/",target:"_blank",rel:"noopener noreferrer"}},[s._v("1.Install and Configure TigerVNC server on Ubuntu 18.04"),n("OutboundLink")],1),s._v(" "),n("a",{attrs:{href:"https://blog.csdn.net/ypbsyy/article/details/80096757",target:"_blank",rel:"noopener noreferrer"}},[s._v("2.VNC连接Ubuntu 16.04桌面灰色的问题解决"),n("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=e.exports}}]);